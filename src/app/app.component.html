<div class="app-container {{lightTheme?'light-theme':''}}">
    <mat-toolbar color="primary">
        <button mat-icon-button (click)="sidenav.toggle()">
            <mat-icon>menu</mat-icon>
        </button>
        <h1>FFXIV Teamcraft</h1>

        <mat-menu #langMenu="matMenu" yPosition="above">
            <button mat-menu-item (click)="use('fr')">FR</button>
            <button mat-menu-item (click)="use('en')">EN</button>
            <button mat-menu-item (click)="use('de')">DE</button>
            <button mat-menu-item (click)="use('ja')">JA</button>
        </mat-menu>

        <button mat-button [matMenuTriggerFor]="langMenu" fxShow fxHide.lt-md>
            {{locale | uppercase}}
        </button>
        <div class="spacer"></div>
        <p class="version">{{version}}</p>
    </mat-toolbar>
    <mat-card class="announcement" *ngIf="showAnnouncement()">
        <mat-grid-list cols="5" rowHeight="35px">
            <mat-grid-tile colspan="4">
                <p [innerHTML]="announcement"></p>
            </mat-grid-tile>
            <mat-grid-tile>
                <button mat-icon-button color="accent" (click)="dismissAnnouncement()">
                    <mat-icon>clear</mat-icon>
                </button>
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card>
    <mat-sidenav-container>
        <mat-sidenav mode="over" #sidenav>
            <div class="accent-background">
                <div class="user">
                    <mat-icon *ngIf="(authState | async)?.isAnonymous">person</mat-icon>
                    <img *ngIf="!((authState | async)?.isAnonymous)" src="{{userIcon}}" alt="avatar">
                    <p class="name">{{username}}</p>
                </div>
                <div *ngIf="(authState | async)?.isAnonymous">
                    <button mat-raised-button (click)="openLoginPopup()">{{'Login' | translate}}</button>
                    <button mat-raised-button (click)="openRegistrationPopup()">{{'Registration' | translate}}</button>
                </div>
                <button mat-raised-button *ngIf="!(authState | async)?.isAnonymous" (click)="disconnect()">{{'Disconnect'
                    | translate}}
                </button>
            </div>
            <mat-divider></mat-divider>
            <mat-nav-list>
                <mat-list-item routerLink="/home" (click)="sidenav.close()">
                    <mat-icon mdListIcon>home</mat-icon>
                    <h3 mdLine>{{'Home' | translate}}</h3>
                </mat-list-item>
                <mat-list-item routerLink="/recipes" (click)="sidenav.close()">
                    <mat-icon mdListIcon>search</mat-icon>
                    <h3 mdLine>{{'Recipes' | translate}}</h3>
                </mat-list-item>
                <mat-list-item routerLink="/lists" (click)="sidenav.close()">
                    <mat-icon mdListIcon>view_list</mat-icon>
                    <h3 mdLine>{{'Lists' | translate}}</h3>
                </mat-list-item>
                <mat-list-item routerLink="/favorites" (click)="sidenav.close()">
                    <mat-icon mdListIcon>favorite</mat-icon>
                    <h3 mdLine>{{'Favorites' | translate}}</h3>
                </mat-list-item>
                <mat-list-item routerLink="/settings" (click)="sidenav.close()">
                    <mat-icon mdListIcon>settings</mat-icon>
                    <h3 mdLine>{{'SETTINGS.title' | translate}}</h3>
                </mat-list-item>
            </mat-nav-list>
            <mat-slide-toggle class="sidebar-element" [(ngModel)]="lightTheme" (change)="saveTheme()">Light Theme
            </mat-slide-toggle>
            <button mat-button [matMenuTriggerFor]="langMenu" fxHide fxShow.lt-md>
                {{locale | uppercase}}
            </button>
            <div class="spacer"></div>
            <a mat-raised-button href="https://github.com/supamiu/ffxiv-teamcraft/issues" target="_blank" color="warn"
               class="report-bug">Report a bug</a>
        </mat-sidenav>
        <div>
            <div class="content">
                <div class="content-middle">
                    <router-outlet></router-outlet>
                </div>
            </div>
        </div>
    </mat-sidenav-container>
</div>
