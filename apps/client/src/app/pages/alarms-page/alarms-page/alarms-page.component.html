<div class="toolbar">
  <nz-switch [(ngModel)]="settings.compactAlarms"></nz-switch>
  {{'Compact_display' | translate}}
</div>

<div class="alarms" *ngIf="alarms$ | async as alarmDisplays;">
  <div *ngFor="let row of alarmDisplays; trackBy: trackByAlarm">
    <nz-card [nzCover]="settings.compactAlarms?null:map" [nzActions]="[delete]"
             [nzLoading]="settings.compactAlarms?false:true" [class.spawned]="row.spawned" #card>
      <nz-card-meta [nzAvatar]="itemIcon" [nzTitle]="cardTitle" [nzDescription]="cardDescription">
      </nz-card-meta>
      <ng-template #itemIcon>
        <app-item-icon [icon]="row.alarm.icon"></app-item-icon>
      </ng-template>
    </nz-card>
    <ng-template #cardTitle>
      {{row.alarm.itemId | itemName | i18n}} <span *ngIf="row.alarm.slot > -1">({{row.alarm.slot}})</span>
    </ng-template>
    <ng-template #cardDescription>
      {{row.alarm.aetheryte?.nameid | placeName | i18n}}<br>
      {{row.remainingTime | timer}}
    </ng-template>
    <ng-template #map>
      <app-map [mapId]="row.alarm.zoneId" [markers]="[{x: row.alarm.coords.x, y: row.alarm.coords.y}]"
               (loaded)="card.nzLoading = false"></app-map>
    </ng-template>
    <ng-template #delete>
      <i class="anticon anticon-delete" (click)="deleteAlarm(row.alarm)"></i>
    </ng-template>
  </div>
</div>
