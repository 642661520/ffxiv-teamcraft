<div fxLayout="column" fxLayoutGap="10px" fxLayoutAlign="center center">
  <h2>{{'SIMULATOR.COMMUNITY_ROTATIONS.Title' | translate}}</h2>
  <input nz-input type="text" class="filter-input"
         [placeholder]="'SIMULATOR.COMMUNITY_ROTATIONS.Name_filter_placeholder' | translate"
         [ngModel]="nameFilter$ | async" (ngModelChange)="nameFilter$.next($event)" autofocus>
  <div fxLayout="row" class="filter-input" fxLayoutGap="5px">
    <nz-select fxFlex="1 1 auto" nzMode="multiple"
               [nzPlaceHolder]="'SIMULATOR.COMMUNITY_ROTATIONS.Tags_filter_placeholder' | translate"
               [ngModel]="tagsFilter$ | async"
               (ngModelChange)="tagsFilter$.next($event)">
      <nz-option *ngFor="let tag of tags" [nzLabel]="tag.label | translate" [nzValue]="tag.value"></nz-option>
    </nz-select>
    <button nz-button (click)="tagsFilter$.next([])" nz-tooltip
            [nzTitle]="'SIMULATOR.COMMUNITY_ROTATIONS.Tags_filter_reset' | translate">
      <i nz-icon type="reload"></i>
    </button>
  </div>
  <div class="filter-input" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
    <nz-select nzShowSearch
               nzAllowClear
               fxFlex="0 0 150px"
               [nzPlaceHolder]="'SIMULATOR.COMMUNITY_ROTATIONS.Durability_filter_placeholder' | translate"
               [ngModel]="durabilityFilter$ | async"
               (ngModelChange)="durabilityFilter$.next($event)">
      <nz-option *ngFor="let rlvl of rlvls" [nzLabel]="rlvl.label" [nzValue]="rlvl.value"></nz-option>
    </nz-select>
    <nz-select nzShowSearch
               nzAllowClear
               fxFlex="0 0 100px"
               [nzPlaceHolder]="'SIMULATOR.COMMUNITY_ROTATIONS.Rlvl_filter_placeholder' | translate"
               [ngModel]="rlvlFilter$ | async"
               (ngModelChange)="rlvlFilter$.next($event)">
      <nz-option nzLabel="30" [nzValue]="30"></nz-option>
      <nz-option nzLabel="35" [nzValue]="35"></nz-option>
      <nz-option nzLabel="40" [nzValue]="40"></nz-option>
      <nz-option nzLabel="60" [nzValue]="60"></nz-option>
      <nz-option nzLabel="70" [nzValue]="70"></nz-option>
      <nz-option nzLabel="80" [nzValue]="80"></nz-option>
    </nz-select>
  </div>
  <app-page-loader [loading]="loading" class="rotations-container">
    <div fxLayout="column" fxLayoutGap="5px" fxFlex="1 1 auto" *ngIf="filteredRotations$ | async as rotations">
      <app-rotation-panel *ngFor="let rotation of rotations; trackBy: trackByRotation" [rotation]="rotation"
                          [publicDisplay]="true"></app-rotation-panel>
      <nz-pagination [nzPageIndex]="page$ | async" (nzPageIndexChange)="page$.next($event)" [nzTotal]="totalLength"
                     *ngIf="totalLength > 0"
                     [nzPageSize]="pageSize" fxLayout="row"
                     fxLayoutAlign="flex-end flex-end"></nz-pagination>
      <app-fullpage-message
        *ngIf="rotations.length === 0">{{'SIMULATOR.COMMUNITY_ROTATIONS.No_rotations_matching' | translate}}
      </app-fullpage-message>
    </div>
  </app-page-loader>
</div>

