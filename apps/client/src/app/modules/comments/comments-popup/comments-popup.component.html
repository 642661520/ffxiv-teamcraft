<div *ngIf="comments$ | async as comments">
  <nz-list [nzDataSource]="comments" [nzRenderItem]="commentTemplate">
    <ng-template #commentTemplate let-comment>
      <nz-list-item>
        <nz-list-item-meta [nzTitle]="comment.content" [nzDescription]="comment.date | date:'short'"
                           [nzAvatar]="avatar">
          <ng-template #avatar>
            <app-user-avatar [userId]="comment.authorId"></app-user-avatar>
          </ng-template>
        </nz-list-item-meta>
      </nz-list-item>
    </ng-template>
  </nz-list>
  <nz-input-group [nzSuffix]="suffix" *ngIf="userId$ | async as userId">
    <input nz-input type="text" [(ngModel)]="newCommentContent" (keydown.enter)="postComment(newCommentContent, userId)">
    <ng-template #suffix>
      <button nz-button nzType="primary" nzSearch (click)="postComment(newCommentContent, userId)">
        <i nz-icon type="message"></i>
      </button>
    </ng-template>
  </nz-input-group>
</div>
